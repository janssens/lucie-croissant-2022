<!doctype html>
<html lang="{{ site.LanguageCode }}">
    {{- partial "head.html" . -}}
    <body class="bg-white text-white font-sans bg-gray-500 md:bg-white">
        <div class="min-h-screen">
            {{- partial "header.html" . -}}
            <section class="bg-white text-union-blue">
                <div class="relative max-w-7xl mx-auto pb-4 md:pt-8" id="main">
                    {{ if .Site.Params.baselinehtml }}
                        <div class="p-4 bg-eelv-green text-white md:hidden">
                                {{ .Site.Params.baselinehtml | markdownify }}
                        </div>
                        <hr class="md:hidden">
                    {{ end }}
                    <div class="md:grid md:grid-cols-2 lg:grid-cols-6">
                        <div id="content_to_expend" class="lg:col-span-4 bg-white text-union-blue md:bg-transparent h-60 overflow-hidden md:h-auto relative">
                            <div id="read_more_layer" class="bg-gradient-to-b from-transparent to-white absolute top-0 left-0 right-0 bottom-0 md:hidden hidden">
                                <a class="absolute bottom-0 w-full text-center cursor-pointer font-sans uppercase italic" href="#appel_text" role="button" onclick="expend();">lire la suite &gt;</a>
                            </div>
                            {{ .Content }}
                        </div>
                        <div class="md:-m-top-20 lg:col-span-2">
                            <form action="/backend/donateHandler.php" method="post" class="">
                                <div class="bg-union-blue text-white p-4 md:p-8 lg:p-10 mb-2" id="sim">
                                    <div class="grid grid-cols-3">
                                    {{ range .Site.Params.DonateValues }}
                                        <a role="button" href="#" data-value="{{.}}" class="block m-1">{{.}} €</a>
                                    {{ end }}
                                    </div>
                                    <div class="py-2 text-2xl text-center">Je donne
                                        <input class="bg-transparent border-b-2 border-white border-solid w-16 font-black text-white text-center"
                                                                   type="number" name="amount" placeholder="xx" required="required" />&nbsp;€&nbsp;
                                        <div id="res" class="hidden inline">soit <strong><span id="discounted_amount"></span>&nbsp;€</strong> <small class="text-xl">après réduction fiscale</small>
                                        <br><small>(réduction de <span id="gain"></span>&nbsp;€ à hauteur de 20% du revenu imposable)</small></div>
                                    </div>
                                </div>
                                <div class="bg-union-blue text-white p-4 md:p-8 lg:p-10">
                                    <input type="hidden" name="redirect_path" value="/pages/donate_merci/">
                                    <input class="opacity-0 absolute block w-0 h-0 overflow-hidden" type="text" name="name" placeholder="Nom *">
                                    <div class="w-full text-black my-2 grid grid-cols-2 space-x-1">
                                        <input class="text-black p-1" type="text" required="required" name="firstname" placeholder="Prénom *">
                                        <input class="text-black p-1 " type="text" required="required" name="lastname" placeholder="Nom *">
                                    </div>
                                    <input class="w-full text-black p-1 my-2" type="email" required="required" name="mail" placeholder="mon@e-mail.fr *">
                                    <input class="w-full text-black p-1 my-2" type="text" required="required" name="telephone" placeholder="Téléphone *">
                                    <input class="w-full text-black p-1 my-2" type="text" required="required" name="street" placeholder="n° et rue *">
                                    <div class="w-full text-black my-2 grid grid-cols-3 space-x-1">
                                        <input class="text-black p-1" type="number" required="required" name="postcode" placeholder="Code postal *">
                                        <input class="text-black p-1 col-span-2" type="text" required="required" name="town" placeholder="Ville *">
                                    </div>
                                    <select class="w-full text-black p-1 my-2 h-8" required="required" name="country" >
                                        <option value="France" selected="selected">France </option>

                                        <option value="Afghanistan">Afghanistan </option>
                                        <option value="Afrique_Centrale">Afrique_Centrale </option>
                                        <option value="Afrique_du_sud">Afrique_du_Sud </option>
                                        <option value="Albanie">Albanie </option>
                                        <option value="Algerie">Algerie </option>
                                        <option value="Allemagne">Allemagne </option>
                                        <option value="Andorre">Andorre </option>
                                        <option value="Angola">Angola </option>
                                        <option value="Anguilla">Anguilla </option>
                                        <option value="Arabie_Saoudite">Arabie_Saoudite </option>
                                        <option value="Argentine">Argentine </option>
                                        <option value="Armenie">Armenie </option>
                                        <option value="Australie">Australie </option>
                                        <option value="Autriche">Autriche </option>
                                        <option value="Azerbaidjan">Azerbaidjan </option>

                                        <option value="Bahamas">Bahamas </option>
                                        <option value="Bangladesh">Bangladesh </option>
                                        <option value="Barbade">Barbade </option>
                                        <option value="Bahrein">Bahrein </option>
                                        <option value="Belgique">Belgique </option>
                                        <option value="Belize">Belize </option>
                                        <option value="Benin">Benin </option>
                                        <option value="Bermudes">Bermudes </option>
                                        <option value="Bielorussie">Bielorussie </option>
                                        <option value="Bolivie">Bolivie </option>
                                        <option value="Botswana">Botswana </option>
                                        <option value="Bhoutan">Bhoutan </option>
                                        <option value="Boznie_Herzegovine">Boznie_Herzegovine </option>
                                        <option value="Bresil">Bresil </option>
                                        <option value="Brunei">Brunei </option>
                                        <option value="Bulgarie">Bulgarie </option>
                                        <option value="Burkina_Faso">Burkina_Faso </option>
                                        <option value="Burundi">Burundi </option>

                                        <option value="Caiman">Caiman </option>
                                        <option value="Cambodge">Cambodge </option>
                                        <option value="Cameroun">Cameroun </option>
                                        <option value="Canada">Canada </option>
                                        <option value="Canaries">Canaries </option>
                                        <option value="Cap_vert">Cap_Vert </option>
                                        <option value="Chili">Chili </option>
                                        <option value="Chine">Chine </option>
                                        <option value="Chypre">Chypre </option>
                                        <option value="Colombie">Colombie </option>
                                        <option value="Comores">Colombie </option>
                                        <option value="Congo">Congo </option>
                                        <option value="Congo_democratique">Congo_democratique </option>
                                        <option value="Cook">Cook </option>
                                        <option value="Coree_du_Nord">Coree_du_Nord </option>
                                        <option value="Coree_du_Sud">Coree_du_Sud </option>
                                        <option value="Costa_Rica">Costa_Rica </option>
                                        <option value="Cote_d_Ivoire">Côte_d_Ivoire </option>
                                        <option value="Croatie">Croatie </option>
                                        <option value="Cuba">Cuba </option>

                                        <option value="Danemark">Danemark </option>
                                        <option value="Djibouti">Djibouti </option>
                                        <option value="Dominique">Dominique </option>

                                        <option value="Egypte">Egypte </option>
                                        <option value="Emirats_Arabes_Unis">Emirats_Arabes_Unis </option>
                                        <option value="Equateur">Equateur </option>
                                        <option value="Erythree">Erythree </option>
                                        <option value="Espagne">Espagne </option>
                                        <option value="Estonie">Estonie </option>
                                        <option value="Etats_Unis">Etats_Unis </option>
                                        <option value="Ethiopie">Ethiopie </option>

                                        <option value="Falkland">Falkland </option>
                                        <option value="Feroe">Feroe </option>
                                        <option value="Fidji">Fidji </option>
                                        <option value="Finlande">Finlande </option>
                                        <option value="France">France </option>

                                        <option value="Gabon">Gabon </option>
                                        <option value="Gambie">Gambie </option>
                                        <option value="Georgie">Georgie </option>
                                        <option value="Ghana">Ghana </option>
                                        <option value="Gibraltar">Gibraltar </option>
                                        <option value="Grece">Grece </option>
                                        <option value="Grenade">Grenade </option>
                                        <option value="Groenland">Groenland </option>
                                        <option value="Guadeloupe">Guadeloupe </option>
                                        <option value="Guam">Guam </option>
                                        <option value="Guatemala">Guatemala</option>
                                        <option value="Guernesey">Guernesey </option>
                                        <option value="Guinee">Guinee </option>
                                        <option value="Guinee_Bissau">Guinee_Bissau </option>
                                        <option value="Guinee equatoriale">Guinee_Equatoriale </option>
                                        <option value="Guyana">Guyana </option>
                                        <option value="Guyane_Francaise ">Guyane_Francaise </option>

                                        <option value="Haiti">Haiti </option>
                                        <option value="Hawaii">Hawaii </option>
                                        <option value="Honduras">Honduras </option>
                                        <option value="Hong_Kong">Hong_Kong </option>
                                        <option value="Hongrie">Hongrie </option>

                                        <option value="Inde">Inde </option>
                                        <option value="Indonesie">Indonesie </option>
                                        <option value="Iran">Iran </option>
                                        <option value="Iraq">Iraq </option>
                                        <option value="Irlande">Irlande </option>
                                        <option value="Islande">Islande </option>
                                        <option value="Israel">Israel </option>
                                        <option value="Italie">italie </option>

                                        <option value="Jamaique">Jamaique </option>
                                        <option value="Jan Mayen">Jan Mayen </option>
                                        <option value="Japon">Japon </option>
                                        <option value="Jersey">Jersey </option>
                                        <option value="Jordanie">Jordanie </option>

                                        <option value="Kazakhstan">Kazakhstan </option>
                                        <option value="Kenya">Kenya </option>
                                        <option value="Kirghizstan">Kirghizistan </option>
                                        <option value="Kiribati">Kiribati </option>
                                        <option value="Koweit">Koweit </option>

                                        <option value="Laos">Laos </option>
                                        <option value="Lesotho">Lesotho </option>
                                        <option value="Lettonie">Lettonie </option>
                                        <option value="Liban">Liban </option>
                                        <option value="Liberia">Liberia </option>
                                        <option value="Liechtenstein">Liechtenstein </option>
                                        <option value="Lituanie">Lituanie </option>
                                        <option value="Luxembourg">Luxembourg </option>
                                        <option value="Lybie">Lybie </option>

                                        <option value="Macao">Macao </option>
                                        <option value="Macedoine">Macedoine </option>
                                        <option value="Madagascar">Madagascar </option>
                                        <option value="Madère">Madère </option>
                                        <option value="Malaisie">Malaisie </option>
                                        <option value="Malawi">Malawi </option>
                                        <option value="Maldives">Maldives </option>
                                        <option value="Mali">Mali </option>
                                        <option value="Malte">Malte </option>
                                        <option value="Man">Man </option>
                                        <option value="Mariannes du Nord">Mariannes du Nord </option>
                                        <option value="Maroc">Maroc </option>
                                        <option value="Marshall">Marshall </option>
                                        <option value="Martinique">Martinique </option>
                                        <option value="Maurice">Maurice </option>
                                        <option value="Mauritanie">Mauritanie </option>
                                        <option value="Mayotte">Mayotte </option>
                                        <option value="Mexique">Mexique </option>
                                        <option value="Micronesie">Micronesie </option>
                                        <option value="Midway">Midway </option>
                                        <option value="Moldavie">Moldavie </option>
                                        <option value="Monaco">Monaco </option>
                                        <option value="Mongolie">Mongolie </option>
                                        <option value="Montserrat">Montserrat </option>
                                        <option value="Mozambique">Mozambique </option>

                                        <option value="Namibie">Namibie </option>
                                        <option value="Nauru">Nauru </option>
                                        <option value="Nepal">Nepal </option>
                                        <option value="Nicaragua">Nicaragua </option>
                                        <option value="Niger">Niger </option>
                                        <option value="Nigeria">Nigeria </option>
                                        <option value="Niue">Niue </option>
                                        <option value="Norfolk">Norfolk </option>
                                        <option value="Norvege">Norvege </option>
                                        <option value="Nouvelle_Caledonie">Nouvelle_Caledonie </option>
                                        <option value="Nouvelle_Zelande">Nouvelle_Zelande </option>

                                        <option value="Oman">Oman </option>
                                        <option value="Ouganda">Ouganda </option>
                                        <option value="Ouzbekistan">Ouzbekistan </option>

                                        <option value="Pakistan">Pakistan </option>
                                        <option value="Palau">Palau </option>
                                        <option value="Palestine">Palestine </option>
                                        <option value="Panama">Panama </option>
                                        <option value="Papouasie_Nouvelle_Guinee">Papouasie_Nouvelle_Guinee </option>
                                        <option value="Paraguay">Paraguay </option>
                                        <option value="Pays_Bas">Pays_Bas </option>
                                        <option value="Perou">Perou </option>
                                        <option value="Philippines">Philippines </option>
                                        <option value="Pologne">Pologne </option>
                                        <option value="Polynesie">Polynesie </option>
                                        <option value="Porto_Rico">Porto_Rico </option>
                                        <option value="Portugal">Portugal </option>

                                        <option value="Qatar">Qatar </option>

                                        <option value="Republique_Dominicaine">Republique_Dominicaine </option>
                                        <option value="Republique_Tcheque">Republique_Tcheque </option>
                                        <option value="Reunion">Reunion </option>
                                        <option value="Roumanie">Roumanie </option>
                                        <option value="Royaume_Uni">Royaume_Uni </option>
                                        <option value="Russie">Russie </option>
                                        <option value="Rwanda">Rwanda </option>

                                        <option value="Sahara Occidental">Sahara Occidental </option>
                                        <option value="Sainte_Lucie">Sainte_Lucie </option>
                                        <option value="Saint_Marin">Saint_Marin </option>
                                        <option value="Salomon">Salomon </option>
                                        <option value="Salvador">Salvador </option>
                                        <option value="Samoa_Occidentales">Samoa_Occidentales</option>
                                        <option value="Samoa_Americaine">Samoa_Americaine </option>
                                        <option value="Sao_Tome_et_Principe">Sao_Tome_et_Principe </option>
                                        <option value="Senegal">Senegal </option>
                                        <option value="Seychelles">Seychelles </option>
                                        <option value="Sierra Leone">Sierra Leone </option>
                                        <option value="Singapour">Singapour </option>
                                        <option value="Slovaquie">Slovaquie </option>
                                        <option value="Slovenie">Slovenie</option>
                                        <option value="Somalie">Somalie </option>
                                        <option value="Soudan">Soudan </option>
                                        <option value="Sri_Lanka">Sri_Lanka </option>
                                        <option value="Suede">Suede </option>
                                        <option value="Suisse">Suisse </option>
                                        <option value="Surinam">Surinam </option>
                                        <option value="Swaziland">Swaziland </option>
                                        <option value="Syrie">Syrie </option>

                                        <option value="Tadjikistan">Tadjikistan </option>
                                        <option value="Taiwan">Taiwan </option>
                                        <option value="Tonga">Tonga </option>
                                        <option value="Tanzanie">Tanzanie </option>
                                        <option value="Tchad">Tchad </option>
                                        <option value="Thailande">Thailande </option>
                                        <option value="Tibet">Tibet </option>
                                        <option value="Timor_Oriental">Timor_Oriental </option>
                                        <option value="Togo">Togo </option>
                                        <option value="Trinite_et_Tobago">Trinite_et_Tobago </option>
                                        <option value="Tristan da cunha">Tristan de cuncha </option>
                                        <option value="Tunisie">Tunisie </option>
                                        <option value="Turkmenistan">Turmenistan </option>
                                        <option value="Turquie">Turquie </option>

                                        <option value="Ukraine">Ukraine </option>
                                        <option value="Uruguay">Uruguay </option>

                                        <option value="Vanuatu">Vanuatu </option>
                                        <option value="Vatican">Vatican </option>
                                        <option value="Venezuela">Venezuela </option>
                                        <option value="Vierges_Americaines">Vierges_Americaines </option>
                                        <option value="Vierges_Britanniques">Vierges_Britanniques </option>
                                        <option value="Vietnam">Vietnam </option>

                                        <option value="Wake">Wake </option>
                                        <option value="Wallis et Futuma">Wallis et Futuma </option>

                                        <option value="Yemen">Yemen </option>
                                        <option value="Yougoslavie">Yougoslavie </option>

                                        <option value="Zambie">Zambie </option>
                                        <option value="Zimbabwe">Zimbabwe </option>

                                    </select>
                                    <label class="w-full block cursor-pointer my-2" for="physique">
                                        <input type="checkbox" id="physique" name="physique" value="on" required="required" class="mr-2"/>
                                        <div class="text-sm inline" >Je certifie sur l’honneur être une personne physique et conformément à la loi n°95-65 du 19 janvier 1995 relative au
                                        financement de la vie politique, le règlement de mon don ne provient pas d’une personne morale (Société, association,
                                            société civile...) mais de mon compte bancaire personnel. <sup>*</sup></div>
                                    </label>
                                    <label class="w-full block cursor-pointer my-2" for="france">
                                        <input type="checkbox" id="france" name="france" value="on" required="required" class="mr-2"/>
                                        <div class="text-sm inline" >Je suis de nationalité française ou je réside fiscalement en France <sup>*</sup></div>
                                    </label>
                                    <label class="w-full block cursor-pointer my-2" for="rgpd">
                                        <input type="checkbox" id="rgpd" name="rgpd" value="on" required="required" class="mr-2"/>
                                        <div class="text-sm inline" >Je consens à ce que ce site stocke mes informations envoyées afin qu’ils puissent répondre à ma requête <sup>*</sup></div>
                                    </label>
                                    <div class="grid grid-cols-2">
                                        <label for="check" class="cursor-pointer">
                                            <input type="radio" id="check" name="method" value="check"/> Par chèque
                                        </label>
                                        <label for="sepa" class="cursor-pointer">
                                            <input type="radio" id="sepa" name="method" value="sepa"/> Par virement
                                        </label>
                                        <!--<label for="creditcard" class="cursor-pointer">
                                            <input type="radio" id="creditcard" name="method" value="creditcard"/> Par carte bancaire
                                        </label>-->
                                    </div>
                                    <div class="bg-gray-300 border-solid border-l-8 border-eelv-green text-union-blue mt-4">
                                        <div data-depends="method" data-check-value="check" class="p-4">
                                            Envoyer un chèque à l’ordre AFE AVEC LC - Mandataire financier de la candidate Lucie Croissant - 639 route du Guillon - 38 500 COUBLEVIE
                                        </div>
                                        <div data-depends="method" data-check-value="sepa" class="p-4">
                                            Faire un virement vers l’IBAN du compte de la campagne :
                                            FR76XXXXXXXX 144 (code BIC : XXXX) en précisant comme nom du destinataire AFE AVEC LC pour Lucie Croissant
                                        </div>
                                        <div data-depends="method" data-check-value="creditcard" class="p-4">
                                            Vous serez redirigé vers le site de notre banque afin de finaliser votre paiement
                                        </div>
                                    </div>
                                    <input type="submit" class="block uppercase text-center bg-eelv-green text-white font-black mt-6 mx-auto py-2 px-4 cursor-pointer hover:bg-white hover:text-union-blue" value="Donner" >
                                    <div class="hidden md:block mt-8">&larr; Rappel de législation <a href="#legislation">ci dessous</a></div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="mt-4" id="legislation">
                        {{ with .Resources.GetMatch "legislation.md" }}
                            {{ .Content }}
                        {{ end }}
                    </div>
                </div>
            </section>
        </div>
        {{- partial "footer.html" . -}}
        {{- partial "burger.html" . -}}
        {{- partial "commonjs.html" . -}}

        <script type="text/javascript">
            //home
            let name = d.querySelector('input[name="name"]');
            name.setAttribute('tabindex','-1');
            let radios = d.querySelectorAll('input[type="radio"]');

            radios.forEach(function (radio){
                radio.addEventListener('change',function (event){
                    let dependencies = d.querySelectorAll('[data-depends='+event.target.name+']');
                    dependencies.forEach(function (dep){
                        if (event.target.value === dep.getAttribute('data-check-value')) {
                            dep.classList.remove('hidden');
                        }else {
                            dep.classList.add('hidden');
                        }
                    })
                });
            });

            window.addEventListener('load',function (){
                d.querySelectorAll('[data-depends]').forEach(function (dependency){
                    let source = d.querySelector('input[type="radio"][name="'+dependency.getAttribute('data-depends')+'"]');
                    if (!source.checked){
                        dependency.classList.add('hidden');
                    }
                });
            })

            let amount_links = d.querySelectorAll('#sim a[role="button"]');
            let amount = d.querySelector('#sim input[name="amount"]')

            amount_links.forEach(function (link){
               link.addEventListener('click',function (e){
                   e.preventDefault();
                   let v = e.target.getAttribute('data-value');
                   amount.value = v;
                   updateDiscountedAmount();
               })
            });

            amount.addEventListener('keyup',function (e){
                updateDiscountedAmount();
            });
            amount.addEventListener('change',function (e){
                updateDiscountedAmount();
            });

            function updateDiscountedAmount(){
                let a = Math.floor(amount.value * 0.34);
                if (a){
                    d.getElementById("discounted_amount").innerHTML = a;
                    d.getElementById("gain").innerHTML = amount.value - a;
                    d.getElementById("res").classList.remove('hidden');
                }else{
                    d.getElementById("discounted_amount").innerHTML = '';
                    d.getElementById("gain").innerHTML = 'xx';
                    d.getElementById("res").classList.add('hidden');
                }
            }

            let read_more = d.querySelector('#read_more_layer');
            let read_more_links = d.querySelectorAll('#content_to_expend a');
            let content_to_expend = d.querySelector('#content_to_expend');

            function collapse(){
                read_more.classList.remove('hidden');
                content_to_expend.setAttribute('style','');
                read_more_links.forEach(function (link){
                    if (link.parentNode.id !== 'read_more_layer')
                        link.setAttribute('tabindex','-1');
                });
            }
            function expend(){
                read_more.classList.add('hidden');
                content_to_expend.style.height = 'auto';
                read_more_links.forEach(function (link){
                    link.setAttribute('tabindex','');
                });
            }

            collapse();

        </script>
    </body>
</html>